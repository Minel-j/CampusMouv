<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CampusMouv{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {# UIKit CSS via CDN - SOLUTION STABLE #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/css/uikit.min.css" />

    {# Votre CSS personnalisé (si nécessaire) #}
    <style>
        /* Vos styles personnalisés ici */
    </style>

    {% block stylesheets %}{% endblock %}
</head>
<body>
{# Messages flash #}
{% for label, messages in app.flashes %}
    {% for message in messages %}
        <div class="uk-alert-{{ label }}" uk-alert>
            <a href class="uk-alert-close" uk-close></a>
            <p>{{ message }}</p>
        </div>
    {% endfor %}
{% endfor %}

<header>
    <nav class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <a class="uk-navbar-item uk-logo" href="{{ path('main_home') }}">Campus Mouv'</a>
        </div>
        <div class="uk-navbar-center uk-visible@m">
            <ul class="uk-navbar-nav">
                <li><a href="#">Qui sommes nous ?</a></li>
                <li><a href="{{ path('sorties_home') }}">Les événements</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav">
                <li>
                    {% if not app.user %}
                        <a href="{{ path('app_login') }}" data-uk-icon="icon:user">Connexion</a>
                    {% else %}
                        <a href="#" data-uk-icon="icon:user">{{ app.user.prenom }}</a>
                        <div class="uk-navbar-dropdown uk-navbar-dropdown-bottom-left">
                            <ul class="uk-nav uk-navbar-dropdown-nav">
                                <li><a href="{{ path('profil') }}">Mon profil</a></li>
                                {% if is_granted('ROLE_ADMIN') %}
                                    <li><a href="{{ path('admin_dashboard') }}">Administration</a></li>
                                {% endif %}
                                <li><a href="{{ path('app_logout') }}">Se déconnecter</a></li>
                            </ul>
                        </div>
                    {% endif %}
                </li>
            </ul>
        </div>
    </nav>
</header>

<main class="uk-container uk-margin-top">
    {% block main %}{% endblock %}
</main>

<footer class="uk-section uk-section-secondary">
    <div class="uk-container">
        <p>&copy; 2025 Campus Mouv'</p>
    </div>
</footer>

{# UIKit JS via CDN - SOLUTION STABLE #}
<script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit-icons.min.js"></script>

{% block javascripts %}{% endblock %}
</body>
</html>