{% extends 'base.html.twig' %}

{% block title %}Sorties disponibles{% endblock %}

{% block main %}
    <section class="uk-section uk-preserve-color cm-background-charcoal uk-light">
        <div class="uk-container uk-container-large">
            <div class="uk-text-center">
                <h1 class="uk-heading-large uk-margin-remove-bottom">Création d'une activité</h1>
                <p class="uk-text-large uk-margin-small-top cm-text-saffron">Découvrez toutes les activités
                    proposées</p>
            </div>
        </div>
    </section>


    <!-- Form -->
    <section>
        {{ form_start(form, {
            method: 'post',
            attr: {enctype: 'multipart/form-data'}
        }) }}
        <!-- Section 1: Informations principales -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Informations principales
            </h3>

            <div class="uk-margin">
                {{ form_row(form.nom) }}
            </div>
        </div>

        <!-- Section 2: Planning -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Planning et timing
            </h3>

            <div class="uk-grid-small uk-child-width-1-3@m" uk-grid>
                <div>
                    {{ form_row(form.dateHeureDebut) }}
                </div>
                <div>
                    {{ form_row(form.dateLimiteInscription) }}
                </div>
                <div>
                    {{ form_row(form.duree) }}
                </div>
            </div>
        </div>

        <!-- Section 3: Photo -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Image de la sortie
            </h3>

            <div class="uk-margin">
                <div class="uk-placeholder uk-text-center cm-photo-upload uk-border-rounded">
                    <span uk-icon="icon: camera; ratio: 2" class="uk-text-muted"></span>
                    <p class="uk-text-lead uk-margin-remove-bottom">Cliquez pour ajouter une photo</p>
                    <p class="uk-text-meta">Formats acceptés: JPG et PNG (max 2MB)</p>

                    {{ form_row(form.photo) }}
                </div>
            </div>
        </div>

        <!-- Section 4: Participants -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Participants et centres d'intérets
            </h3>


            <div class="uk-grid-small uk-child-width-1-3@m" uk-grid>
                <div>
                    {{ form_row(form.nbInscriptionMin) }}
                </div>
                <div>
                    {{ form_row(form.nbInscriptionMax) }}
                </div>
                <div>
                    {{ form_row(form.interets) }}
                </div>
            </div>
        </div>

        <!-- Section 5: Description -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Description de la sortie
            </h3>

            <div class="uk-margin">
                {{ form_row(form.infos) }}
            </div>
        </div>

        <!-- Section 6: Localisation -->
        <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-margin-bottom cm-form-section">
            <h3 class="uk-card-title uk-flex uk-flex-middle uk-margin-medium-bottom">
                <span class="cm-section-icon uk-margin-small-right"></span>
                Localisation et lieu de rendez-vous
            </h3>
            <div data-controller="lieu">
                <!-- Campus et Lieu -->
                <div class="uk-grid-small uk-child-width-1-3@m uk-margin" uk-grid>
                    <div data-controller="campus-filter lieu">
                        <div>
                            {{ form_widget(form.campus) }}
                        </div>

                        <div>
                            {{ form_widget(form.lieu) }}
                        </div>
                        <div>
                            <button class="uk-button uk-button-primary" type="button" uk-toggle="target: #mon-modal">
                                Ajouter un lieu
                            </button>
                        </div>
                    </div>

                    <!-- Adresse complète -->
                    <div class="uk-grid-small uk-child-width-1-3@m" uk-grid>
                        <div>
                            <label class="uk-form-label">Adresse</label>
                            <input type="text" class="uk-input" data-lieu-target="adresse" readonly
                                   placeholder="Adresse du lieu">
                        </div>
                        <div>
                            <label class="uk-form-label">Ville</label>
                            <input type="text" class="uk-input" data-lieu-target="ville" readonly placeholder="Ville">
                        </div>
                        <div>
                            <label class="uk-form-label">Code Postal</label>
                            <input type="text" class="uk-input" data-lieu-target="codePostal" readonly
                                   placeholder="Code postal">
                        </div>
                    </div>

                </div>
            </div>


            <!-- Boutons d'action -->
            <div class="uk-card uk-card-default uk-card-body uk-border-rounded uk-text-center">
                <div class="uk-flex uk-flex-center uk-flex-middle uk-grid-small" uk-grid>
                    <div>{{ form_row(form.cancel) }}</div>
                    <div>{{ form_row(form.create) }}</div>
                </div>
            </div>

            {{ form_end(form) }}

    </section>

    <div id="mon-modal" uk-modal>
        <div class="uk-modal-dialog uk-modal-body">
            <h2 class="uk-modal-title">Ajouter un lieu</h2>

            <!-- Zone pour afficher les messages d'erreur/succès -->
            <div id="messages"></div>

            <!-- Formulaire corrigé -->
            <form class="uk-form-stacked" id="form-lieu" action="">
                <div class="uk-margin">
                    <label class="uk-form-label" for="nom">Nom</label>
                    <div class="uk-form-controls">
                        <input class="uk-input" id="nom" name="nom" type="text" placeholder="Nom du lieu" required>
                    </div>
                </div>
                <div class="uk-margin">
                    <label class="uk-form-label" for="rue">N° et nom de la rue</label>
                    <div class="uk-form-controls">
                        <input class="uk-input" id="rue" name="rue" type="text" placeholder="4 Privet Drive" required>
                    </div>
                </div>
                <div class="uk-margin">
                    <label class="uk-form-label" for="ville">Ville</label>
                    <div class="uk-form-controls">
                        <input class="uk-input" id="ville" name="ville" type="text" placeholder="Little Whinging"
                               required>
                    </div>
                </div>
                <div class="uk-margin">
                    <label class="uk-form-label" for="code_postal">Code postal</label>
                    <div class="uk-form-controls">
                        <input class="uk-input" id="code_postal" name="code_postal" type="text" placeholder="00934"
                               required>
                    </div>
                </div>

                <p class="uk-text-right">
                    <button class="uk-button uk-button-default uk-modal-close" type="button">Annuler</button>
                    <button class="uk-button uk-button-primary" type="submit" id="btn-sauver">Sauvegarder</button>
                </p>
            </form>
        </div>
    </div>
    <script src="{{ asset('js/create-sortie.js') }}"></script>
{% endblock %}